apiVersion: 1 
datasources: 
  - name: Prometheus 
    type: prometheus 
    uid: prometheus 
    access: proxy 
    url: http://prometheus:9090 
    basicAuth: false 
    isDefault: false 
    editable: false 
    jsonData: 
      exemplarTraceIdDestinations: 
        - name: trace_id 
          datasourceUid: tempo 
 
 
  - name: Loki 
    type: loki 
    uid: loki 
    url: http://loki:3100 
    jsonData: 
      derivedFields: 
        - name: 'trace_id' 
          matcherRegex: 'trace_id' 
          matcherType: 'label' 
          url: '$${__value.raw}' 
          datasourceUid: 'tempo' 
 
 
  - name: Tempo 
    type: tempo 
    access: proxy 
    orgId: 1 
    url: http://tempo:3200 
    basicAuth: false 
    isDefault: true 
    version: 1 
    editable: false 
    apiVersion: 1 
    uid: tempo 
    jsonData: 
      tracesToLogs: 
        datasourceUid: 'loki' 
        mappedTags: [ { key: 'service.name', value: 'service_name' } ] 
        spanStartTimeShift: '-1h' 
        spanEndTimeShift: '1h' 
        mapTagNamesEnabled: true 
        filterByTraceID: true 
      serviceMap: 
        datasourceUid: 'prometheus' 
      search: 
        hide: false 
      nodeGraph: 
        enabled: true 
      lokiSearch: 
        datasourceUid: 'loki' 
